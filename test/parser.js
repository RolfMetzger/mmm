var parseBalanceChanges = require('ripple-lib-transactionparser').parseBalanceChanges;

var orderbookChanges = require('ripple-lib-transactionparser').orderbookChanges;

var test = '{\"engine_result\":\"tesSUCCESS\",\"engine_result_code\":0,\"engine_result_message\":\"The transaction was applied. Only final in a validated ledger.\",\"ledger_hash\":\"4F3D667B9D6E27A5C9F0068C92B8DBE09E2888C96EE55E672309BD51B0A14073\",\"ledger_index\":1382113,\"meta\":{\"AffectedNodes\":[{\"DeletedNode\":{\"FinalFields\":{\"Account\":\"rD8dZy2cXdzURTbFb3bhebQ3FFvaWCB8Nx\",\"BookDirectory\":\"DF93793CDB607AA3D472C49A846B5E3DF8610E1E243769275A071AFD498D0000\",\"BookNode\":\"0000000000000000\",\"Flags\":0,\"OwnerNode\":\"0000000000000000\",\"PreviousTxnID\":\"0DC7A5D18F8088F6DCF9A770D8896C3581DD1BC78F5DFA48AFE5C2842E5D0FCC\",\"PreviousTxnLgrSeq\":1382014,\"Sequence\":90,\"TakerGets\":{\"currency\":\"USD\",\"issuer\":\"rHjGuGDJvKQ2RSLj3WesnxVoKVVhbSwYQL\",\"value\":\"498\"},\"TakerPays\":\"99600000\"},\"LedgerEntryType\":\"Offer\",\"LedgerIndex\":\"2DC821B8F2F60C4DEEC69EA6016DB2E6623FE4742C8FC2524556384553CBC3ED\"}},{\"ModifiedNode\":{\"FinalFields\":{\"Flags\":0,\"Owner\":\"rD8dZy2cXdzURTbFb3bhebQ3FFvaWCB8Nx\",\"RootIndex\":\"5C74D2AA839CBFE0239B32811B5D49073C42E5052FD85DAD45C7F4C18B0A3520\"},\"LedgerEntryType\":\"DirectoryNode\",\"LedgerIndex\":\"5C74D2AA839CBFE0239B32811B5D49073C42E5052FD85DAD45C7F4C18B0A3520\"}},{\"ModifiedNode\":{\"FinalFields\":{\"Account\":\"rD8dZy2cXdzURTbFb3bhebQ3FFvaWCB8Nx\",\"Balance\":\"1252111557\",\"Flags\":0,\"OwnerCount\":4,\"Sequence\":92},\"LedgerEntryType\":\"AccountRoot\",\"LedgerIndex\":\"C87F41E1A3FEBB1542A8A27B70864D06521629AD11422A77950C062D154D6D85\",\"PreviousFields\":{\"Balance\":\"1252111569\",\"OwnerCount\":5,\"Sequence\":91},\"PreviousTxnID\":\"0DC7A5D18F8088F6DCF9A770D8896C3581DD1BC78F5DFA48AFE5C2842E5D0FCC\",\"PreviousTxnLgrSeq\":1382014}},{\"DeletedNode\":{\"FinalFields\":{\"ExchangeRate\":\"5A071AFD498D0000\",\"Flags\":0,\"RootIndex\":\"DF93793CDB607AA3D472C49A846B5E3DF8610E1E243769275A071AFD498D0000\",\"TakerGetsCurrency\":\"0000000000000000000000005553440000000000\",\"TakerGetsIssuer\":\"B780C1A8E7B94606EA4F473B5A3C165E84AFD844\",\"TakerPaysCurrency\":\"0000000000000000000000000000000000000000\",\"TakerPaysIssuer\":\"0000000000000000000000000000000000000000\"},\"LedgerEntryType\":\"DirectoryNode\",\"LedgerIndex\":\"DF93793CDB607AA3D472C49A846B5E3DF8610E1E243769275A071AFD498D0000\"}}],\"TransactionIndex\":0,\"TransactionResult\":\"tesSUCCESS\"},\"status\":\"closed\",\"transaction\":{\"Account\":\"rD8dZy2cXdzURTbFb3bhebQ3FFvaWCB8Nx\",\"Fee\":\"12\",\"Flags\":2147483648,\"LastLedgerSequence\":1382115,\"Memos\":[{\"Memo\":{\"MemoData\":\"726D2D312E322E33\",\"MemoType\":\"636C69656E74\"}}],\"OfferSequence\":90,\"Sequence\":91,\"SigningPubKey\":\"03128A83EB6C7224574BD4F42D5359EDE02CA43237B44B2012C5BB170F7BA91D0E\",\"TransactionType\":\"OfferCancel\",\"TxnSignature\":\"304402201D4DD688FAEE147AB184889B290A1CCDF29DDDE245FEFB790DF7CC037350D118022033652E9FF6AB7BB3C05F75B831B022C47E51B5F2491B8BD09E49EF787BDB7A75\",\"date\":548814091,\"hash\":\"114206D72EB30FAF44F2D83DBEBC38595A2812ADB9E88DA5620688F9CBC4A64D\"},\"type\":\"transaction\",\"validated\":true}'
var balanceChange = parseBalanceChanges(test);
var orderbookChange = parseOrderbookChanges(test);
console.log(balanceChange);
console.log(orderbookChange);
